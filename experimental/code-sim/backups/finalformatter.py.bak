import os
# parames used: linestart = 'publicInstTuplelookup(StringID){'

# lineend = /**


def format(linestart, lineend, pathtofixed, folder='.'):
    namelist = os.listdir()
    linestart = ''.join(linestart.split())
    lineend = ''.join(lineend.split())
    for filename in namelist:
        if os.path.isdir(filename) or filename == 'formater.py':
            continue
        linesnum = []
        lineenum = 0
        num = 0
        check = False
        with open(filename, 'r') as f:
            for line in f:
                num += 1
                line = ''.join(line.split())
                if linestart in line:
                    check = True
                elif check and not line.startswith('/') and not line.startswith(
                        '*'):
                    linesnum.append(num)
                if line == lineend:
                    lineenum = num
        num = 0
        check = False
        with open(pathtofixed + 'f' + filename, 'w') as nf:
            with open(filename, 'r') as f:
                for line in f:
                    num += 1
                    if num in linesnum:
                        nf.write(line)
                    if num + 1 == lineenum:
                        break


if __name__ == "__main__":
    linestart = input("start string: ")
    lineend = input("end string: ")
    pathtofixed = input("fixed file path: ")
    folder = input("folder to read from: ")
    format(linestart, lineend, pathtofixed, folder)
